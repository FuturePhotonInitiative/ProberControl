
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Write and Execute a Measurement Script &#8212; AutoProber 2.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Writing a Coordinate File" href="coordinateFile.html" />
    <link rel="prev" title="Interface with a Multi-Channel Device" href="interfaceMultiChannel.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="write-and-execute-a-measurement-script">
<h1>Write and Execute a Measurement Script<a class="headerlink" href="#write-and-execute-a-measurement-script" title="Permalink to this headline">¶</a></h1>
<p>Measurement scripts are used to automate experiments that may take a long time. There are two ways to run measurement scripts. They can be run via the command line or they can be launched over the graphical user interface (GUI).</p>
<div class="section" id="running-scripts">
<h2>Running Scripts<a class="headerlink" href="#running-scripts" title="Permalink to this headline">¶</a></h2>
<p>Interfacing through the GUI allows you to locate the script to run via a navigation window. After choosing your script to be ran, use the <code class="docutils literal"><span class="pre">Execute</span> <span class="pre">Script</span></code> button to begin the script. You’ll see a progress bar launched in the command-prompt window. The results will be written to a file <code class="docutils literal"><span class="pre">results.csv</span></code> in the <code class="docutils literal"><span class="pre">config</span></code> directory.</p>
<p>You can also run the script via the command line which is described in <a class="reference internal" href="../launching.html#launching-label"><span class="std std-ref">Launching ProberControl</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you run a script, you can continue to interface with your ProberControl system. The instruments that are locked for the duration of the script will not be available to you until the script is finished, so you shouldn’t worry about collisions between devices.</p>
</div>
<a class="reference internal image-reference" href="../../_images/scripting.PNG"><img alt="../../_images/scripting.PNG" class="align-center" src="../../_images/scripting.PNG" style="width: 450px; height: 500px;" /></a>
</div>
<div class="section" id="writing-scripts">
<h2>Writing Scripts<a class="headerlink" href="#writing-scripts" title="Permalink to this headline">¶</a></h2>
<p>Writing a measurement script is similar to writing a configuration file. We use the same notation, relying on the <code class="docutils literal"><span class="pre">#</span></code> symbol to designate certain features and a new line defining the beginning and end of an information block. For any experiment or execution of function, you’ll need to write an information block.
.. note:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Blocks</span> <span class="n">of</span> <span class="n">information</span> <span class="n">are</span> <span class="n">separated</span> <span class="n">by</span> <span class="n">a</span> <span class="n">new</span> <span class="n">line</span>
</pre></div>
</div>
</div>
<div class="section" id="measurement-blocks">
<h2>Measurement Blocks<a class="headerlink" href="#measurement-blocks" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">Measurement</span> <span class="pre">Name</span></code> field is whatever you would like to name it.</li>
<li>The <code class="docutils literal"><span class="pre">Structure</span></code> field is defined in the coordinates file that you’ve written already.</li>
<li>the <code class="docutils literal"><span class="pre">procedure</span></code> field refers to a <code class="docutils literal"><span class="pre">.py</span></code> file that you’ve written and placed in the procedures directory.</li>
<li>The <code class="docutils literal"><span class="pre">function</span></code> field refers to the function in the procedures file that you’ve defined and wish to utilize</li>
<li>The <code class="docutils literal"><span class="pre">Arguments</span></code> field refers to the arguments, if any, for the function you wish to utilize. If there are no arguments, write <code class="docutils literal"><span class="pre">none</span></code> before the arguments field.</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1">#Measurement Name</span>
<span class="n">Test_PhaseShifter_Spec</span>
<span class="c1">#Structure</span>
<span class="n">phaseshift_cell_brian</span>
<span class="c1">#procedure</span>
<span class="n">Measure</span>
<span class="c1">#Function</span>
<span class="n">get_e_spectrum</span>
<span class="c1">#Arguments</span>
<span class="mi">10</span> <span class="mi">300</span> <span class="mi">10</span> <span class="mf">0.1</span>

<span class="c1">#Measurement Name</span>
<span class="n">Test_Ring_Bot_Res_Shift</span>
<span class="c1">#Structure</span>
<span class="n">ring_bot</span>
<span class="c1">#procedure</span>
<span class="n">Measure</span>
<span class="c1">#Function</span>
<span class="n">dc_sweep_1d</span>
<span class="c1">#Arguments</span>
<span class="n">none</span>
</pre></div>
</div>
</div>
<div class="section" id="output-configuration">
<h2>Output Configuration<a class="headerlink" href="#output-configuration" title="Permalink to this headline">¶</a></h2>
<p>By default all the measurements’ results are output to one file, <code class="docutils literal"><span class="pre">results.csv</span></code>. However, the tests specified in one .meas script can span multiple device groups, chips or wafers. The author of the measurement script can, therefore, classify the various information blocks into any of the following identifiers: <code class="docutils literal"><span class="pre">wafer</span></code>, <code class="docutils literal"><span class="pre">chip</span></code> and <code class="docutils literal"><span class="pre">group</span></code>, each one enclosing the next, from left to right.</p>
<p>The author need not specify all the identifiers for every block, but once one of those identifiers are used, every block should fall under a group denoted by this identifier. Here’s is how we can use the grouping identifiers in the example provided above:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">group</span><span class="o">-</span><span class="n">by</span><span class="p">:</span> <span class="n">group</span>

<span class="o">&gt;</span> <span class="n">chip</span>
<span class="n">OurOnlyChip</span>

<span class="o">&gt;</span> <span class="n">group</span>
<span class="n">PhaseShifters</span>

<span class="c1">#Measurement Name</span>
<span class="n">Test_PhaseShifter_Spec</span>
<span class="c1">#Structure</span>
<span class="n">phaseshift_cell_brian</span>
<span class="c1">#procedure</span>
<span class="n">Measure</span>
<span class="c1">#Function</span>
<span class="n">get_e_spectrum</span>
<span class="c1">#Arguments</span>
<span class="mi">10</span> <span class="mi">300</span> <span class="mi">10</span> <span class="mf">0.1</span>

<span class="o">&gt;</span> <span class="n">group</span>
<span class="n">Rings</span>

<span class="c1">#Measurement Name</span>
<span class="n">Test_Ring_Bot_Res_Shift</span>
<span class="c1">#Structure</span>
<span class="n">ring_bot</span>
<span class="c1">#procedure</span>
<span class="n">Measure</span>
<span class="c1">#Function</span>
<span class="n">dc_sweep_1d</span>
<span class="c1">#Arguments</span>
<span class="n">none</span>
</pre></div>
</div>
<p>The scope of the identifiers lasts up until the next identifier of the same type is identified. That means that both measurements fall under <code class="docutils literal"><span class="pre">chip</span></code> OurOnlyChip, but each one in different groups, <code class="docutils literal"><span class="pre">PhaseShifters</span></code> and <code class="docutils literal"><span class="pre">Rings</span></code> respectively.
The purpose of grouping identifiers is to configure how the output will be distributed into files. The output ordering is determined by the optional first line in the measurement script:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">group</span><span class="o">-</span><span class="n">by</span><span class="p">:</span> <span class="n">group</span>
</pre></div>
</div>
<p>In this example, where we partition by <code class="docutils literal"><span class="pre">group</span></code> two files will be output with names <code class="docutils literal"><span class="pre">results-PhaseShifters.csv</span></code> and <code class="docutils literal"><span class="pre">results-Rings.csv</span></code>, containing the respective measurement results.</p>
</div>
<div class="section" id="binning-configuration">
<h2>Binning Configuration<a class="headerlink" href="#binning-configuration" title="Permalink to this headline">¶</a></h2>
<p>It is possible to pass all information gathered / measured to a binning function to evaluate the device or sort it into groups by any parameters. Binning functions need to be prepared in the procedures folder. Examples can be found in prober/procedures/Binning.py.</p>
<p>The binning function needs to accept exactly one argument that will be a list with the first argument being the device ID (defined under either <code class="docutils literal"><span class="pre">&gt;</span> <span class="pre">wafer</span></code> or <code class="docutils literal"><span class="pre">&gt;</span> <span class="pre">chip</span></code>) followed by file paths for all files in which information about the device was written. The binning function should return a <code class="docutils literal"><span class="pre">str</span></code> object to classify the device.</p>
<p>The default binning function is defined at the head of the measurement file:
.. parsed-literal:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">bin</span><span class="o">-</span><span class="n">by</span><span class="p">:</span> <span class="n">Binning</span><span class="p">:</span><span class="n">FuncA</span>
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">Binning</span></code> refers to the Binning.py file in the procedures folder (any other file in the procedure folder can be specified and used) and <code class="docutils literal"><span class="pre">FuncA</span></code> refers to one function inside the file.</p>
<p>Block wide binning function can be defined with
.. parsed-literal:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="nb">bin</span>
<span class="n">Binning</span><span class="p">:</span><span class="n">FuncB</span>
</pre></div>
</div>
<p>A block ends with the call of the binning function, which is executed when the wafer or chip parameter changes, see Output Configuration. Note that if a wafer group is declared only wafer parameter changes trigger binning functions. If no wafer parameter is present the changes of the chip parameters trigger the call of the binning function. If neither is present, the binning function won’t be triggered.</p>
<p>Trigger function are only called if either a default or local binning function was declared.</p>
</div>
<div class="section" id="chip-storing">
<h2>Chip Storing<a class="headerlink" href="#chip-storing" title="Permalink to this headline">¶</a></h2>
<p>If a binning function was called on a chip parameter change and a MProber is present in the stages dictionary, the result of the binning function is used to determine the storing container for the device.</p>
<p>This is done by querying a database or file in which binning groups are related to IDs of containers. The device ID and the container ID are then send to the MProber to store the device.</p>
</div>
<div class="section" id="graphically-aided-script-compiling">
<h2>Graphically Aided Script Compiling<a class="headerlink" href="#graphically-aided-script-compiling" title="Permalink to this headline">¶</a></h2>
<p>In the <code class="docutils literal"><span class="pre">Scripts</span></code> menu the <a class="reference internal" href="../components/scriptbuilder.html#scriptbuilder-label"><span class="std std-ref">ScriptBuilder GUI</span></a> can be opened. The GUI based editor helps with the creation of measurement scripts.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Write and Execute a Measurement Script</a><ul>
<li><a class="reference internal" href="#running-scripts">Running Scripts</a></li>
<li><a class="reference internal" href="#writing-scripts">Writing Scripts</a></li>
<li><a class="reference internal" href="#measurement-blocks">Measurement Blocks</a></li>
<li><a class="reference internal" href="#output-configuration">Output Configuration</a></li>
<li><a class="reference internal" href="#binning-configuration">Binning Configuration</a></li>
<li><a class="reference internal" href="#chip-storing">Chip Storing</a></li>
<li><a class="reference internal" href="#graphically-aided-script-compiling">Graphically Aided Script Compiling</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="interfaceMultiChannel.html" title="previous chapter">Interface with a Multi-Channel Device</a></li>
      <li>Next: <a href="coordinateFile.html" title="next chapter">Writing a Coordinate File</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/source/howto/measurementScript.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Columbia Lightwave Research Laboratory.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../../_sources/source/howto/measurementScript.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>